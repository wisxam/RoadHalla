import{r as n,V as z,k as u,W as M,X as I,Y as L,Z as S,$ as T,O as V,a0 as A,a1 as B}from"./index-COGNGG0t.js";class D extends n.Component{getSnapshotBeforeUpdate(a){const e=this.props.childRef.current;if(e&&a.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:i,isPresent:a}){const e=n.useId(),s=n.useRef(null),f=n.useRef({width:0,height:0,top:0,left:0}),{nonce:x}=n.useContext(z);return n.useInsertionEffect(()=>{const{width:p,height:t,top:d,left:C}=f.current;if(a||!s.current||!p||!t)return;s.current.dataset.motionPopId=e;const o=document.createElement("style");return x&&(o.nonce=x),document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${t}px !important;
            top: ${d}px !important;
            left: ${C}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[a]),u.jsx(D,{isPresent:a,childRef:s,sizeRef:f,children:n.cloneElement(i,{ref:s})})}const O=({children:i,initial:a,isPresent:e,onExitComplete:s,custom:f,presenceAffectsLayout:x,mode:p})=>{const t=M(U),d=n.useId(),C=n.useMemo(()=>({id:d,initial:a,isPresent:e,custom:f,onExitComplete:o=>{t.set(o,!0);for(const c of t.values())if(!c)return;s&&s()},register:o=>(t.set(o,!1),()=>t.delete(o))}),x?[Math.random()]:[e]);return n.useMemo(()=>{t.forEach((o,c)=>t.set(c,!1))},[e]),n.useEffect(()=>{!e&&!t.size&&s&&s()},[e]),p==="popLayout"&&(i=u.jsx(K,{isPresent:e,children:i})),u.jsx(I.Provider,{value:C,children:i})};function U(){return new Map}const g=i=>i.key||"";function w(i){const a=[];return n.Children.forEach(i,e=>{n.isValidElement(e)&&a.push(e)}),a}const W=({children:i,exitBeforeEnter:a,custom:e,initial:s=!0,onExitComplete:f,presenceAffectsLayout:x=!0,mode:p="sync"})=>{const t=n.useMemo(()=>w(i),[i]),d=t.map(g),C=n.useRef(!0),o=n.useRef(t),c=M(()=>new Map),[P,$]=n.useState(t),[h,v]=n.useState(t);L(()=>{C.current=!1,o.current=t;for(let l=0;l<h.length;l++){const r=g(h[l]);d.includes(r)?c.delete(r):c.get(r)!==!0&&c.set(r,!1)}},[h,d.length,d.join("-")]);const y=[];if(t!==P){let l=[...t];for(let r=0;r<h.length;r++){const m=h[r],R=g(m);d.includes(R)||(l.splice(r,0,m),y.push(m))}p==="wait"&&y.length&&(l=y),v(w(l)),$(t);return}const{forceRender:E}=n.useContext(S);return u.jsx(u.Fragment,{children:h.map(l=>{const r=g(l),m=t===h||d.includes(r),R=()=>{if(c.has(r))c.set(r,!0);else return;let j=!0;c.forEach(k=>{k||(j=!1)}),j&&(E==null||E(),v(o.current),f&&f())};return u.jsx(O,{isPresent:m,initial:!C.current||s?void 0:!1,custom:m?void 0:e,presenceAffectsLayout:x,mode:p,onExitComplete:m?void 0:R,children:l},r)})})},b={initial:{opacity:0,x:20},enter:{opacity:1,x:0},exit:{opacity:0,x:-20}},G=()=>{const i=T();return u.jsx(W,{mode:"wait",children:u.jsxs(V.div,{initial:"initial",animate:"enter",exit:"exit",variants:b,transition:{duration:.5},style:{position:"relative",width:"100%",height:"100%"},children:[u.jsx(A,{}),u.jsx(B,{})]},i.pathname)})};export{G as default};
